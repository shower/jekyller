{% capture strip_whitespace %}

# Set all the things

    {% capture theme %}{% if page.theme and page.theme != 'default' %}{{ page.theme }}{% else %}{{ site.default_theme }}{% endif %}{% endcapture %}
    {% capture width %}{% if page.width %}{{ page.width }}{% else %}{{ site.default_width }}{% endif %}{% endcapture %}
    {% capture lang %}{% if page.lang %}{{ page.lang }}{% else %}{{ site.default_lang }}{% endif %}{% endcapture %}
    {% capture body_class %}{% if page.body_class %}{{ page.body_class }}{% else %}{{ site.default_body_class }}{% endif %}{% endcapture %}

    {% capture author_name %}{% if page.author %}{% if page.author.name %}{{ page.author.name }}{% else %}{{ page.author }}{% endif %}{% else %}{{ site.author.name }}{% endif %}{% endcapture %}
    {% capture author_url  %}{% if page.author %}{{ page.author.url }}{% else %}{% if site.author.url %}{{ site.author.url }}{% endif %}{% endif %}{% endcapture %}

    {% capture company_name %}{% if page.author.company %}{% if page.author.company.name %}{{ page.author.company.name }}{% else %}{{ page.author.company }}{% endif %}{% elsif page.company %}{% if page.company.name %}{{ page.company.name }}{% else %}{{ page.company }}{% endif %}{% else %}{{ site.author.company.name }}{% endif %}{% endcapture %}
    {% capture company_url  %}{% if page.author.company %}{{ page.author.company.url }}{% elsif page.company %}{{ page.company.url }}{% else %}{% if site.author.company.url %}{{ site.author.company.url }}{% endif %}{% endif %}{% endcapture %}

    {% capture title %}{% if page.title %}{{ page.title }}{% else %}{{ supertitle }}{% endif %}{% endcapture %}

    {% capture subtitle %}{% if page.subtitle %}{{ page.subtitle }}{% else %}{% if author_url != '' %}[{{ author_name }}]({{ author_url }}){% else %}{{ author_name }}{% endif %}{% if company_name != '' %}, {% if company_url != '' %}[{{ company_name }}]({{ company_url }}){% else %}{{ company_name }}{% endif %}{% endif %}{% endif %}{% endcapture %}{% capture subtitle %}{{ subtitle | markdownify }}{% endcapture %}

    {% capture fork_url %}{% if page.fork_url %}{{ page.fork_url }}{% else %}{{ site.fork_url }}{% endif %}{% endcapture %}

## Set the progress var

    {% assign progress = page.progress | append:'' | size %}
    {% if progress == 0 %}
        {% assign progress = site.progress %}
    {% else %}
        {% assign progress = page.progress %}
    {% endif %}

## Set the line numbers var

    {% assign line_numbers = page.line_numbers | append:'' | size %}
    {% if line_numbers == 0 %}
        {% assign line_numbers = site.line_numbers %}
    {% else %}
        {% assign line_numbers = page.line_numbers %}
    {% endif %}

{% endcapture %}
